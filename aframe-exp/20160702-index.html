<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Test</title>
    <meta name="description" content="Hello, World! â€¢ A-Frame">
    <script src="dist/aframe-v0.2.0.min.js"></script>
    <script>
      /*
      //  Write your creative code interations here
      */
    </script>
  </head>
  <body>
    <a-scene stats fog="type: linear; color: #AAB; far: 30; near: 0" id="scene">

      <a-assets>
        <img id="highlight1" src="assets/img/radial-highlight.png">
        <img id="shadow2" src="assets/img/radial-shadow-2.png">
        <a-mixin id="red" material="color: red"></a-mixin>
        <a-mixin id="blue" material="color: blue"></a-mixin>
        <a-mixin id="cube" geometry="primitive: box; width: 2; depth:2; height:2;"></a-mixin>
      </a-assets>

      <!-- Ground Highlight -->
      <a-image position="0 -.2 5" src="#highlight1" rotation="-90 0 0" scale="30 30 30"></a-image>


      <a-entity position="0 2.2 4">
        <a-entity camera look-controls wasd-controls>
          <a-entity cursor
                    geometry="primitive: ring; radiusOuter: 0.015; radiusInner: 0.01; segmentsTheta: 32"
                    material="color: #283644; shader: flat"
                    raycaster="far: 30"
                    position="0 0 -0.75"></a-entity>
        </a-entity>
      </a-entity>

      <!-- BACKGROUND -->
      <a-sky color="#AAB"></a-sky>


  </a-scene>

  <script>
  (function () {
    var count = 2;

    /**
     * Returns a random integer between min (inclusive) and max (inclusive)
     * Using Math.round() will give you a non-uniform distribution!
     */
    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function getRandomPos(){
      var x = getRandomInt(-5, 5);
      var y = getRandomInt(-5, 5);
      var z = getRandomInt(-5, 5);
      var coordinate = x+" "+y+" "+z;
      return coordinate;
    }
    
    function getRandomColor(){
      var r = getRandomInt(0, 255);
      var g = getRandomInt(0, 255);
      var b = getRandomInt(0, 255);
      var a = 1;
      var color = "rgba("+r+","+g+","+b+","+a+")";
      return color;
    }


    for (i=0;i<count;i++){
      // create node
      var node = document.createElement('a-entity');
      // set it to be a cube
      node.setAttribute("mixin","cube red");
      node.setAttribute("position","");
      node.setAttribute("position",getRandomPos());
      node.setAttribute("material","color: "+getRandomColor());
      document.getElementById("scene").appendChild(node);

    }

    document.querySelector('#cube').addEventListener('click', function () {
      this.setAttribute('material', 'color', 'red');
      console.log('I was clicked!');
      
      // animation
      node.innerHTML = '<a-animation begin="click" attribute="rotation" dur="10000" fill="forwards" to="0 360 0" repeat="indefinite"></a-animation>';
    });

    })();
  </script>

  </body>
</html>
